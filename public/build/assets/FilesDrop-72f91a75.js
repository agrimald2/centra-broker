import{j as p,o,c as n,b as i,g as c,F as u,e as m,h,s as v,t as f,x as _,y}from"./app-f20ad74b.js";import{_ as D}from"./_plugin-vue_export-helper-c27b6911.js";const k={data(){return{isDragging:!1,files:[]}},methods:{onChange(){const e=this;let s=Array.from(this.$refs.file.files);e.files.some(d=>s.some(a=>a.name===d.name&&a.size===d.size))?(e.showMessage=!0,alert("Ese archivo ya existe")):(e.files.push(...s),this.$emit("file-added",this.files))},dragover(e){e.preventDefault(),this.isDragging=!0},dragleave(){this.isDragging=!1},drop(e){e.preventDefault(),this.$refs.file.files=e.dataTransfer.files,this.onChange(),this.isDragging=!1},remove(e){this.files.splice(e,1)},generateURL(e){let s=URL.createObjectURL(e);return setTimeout(()=>{URL.revokeObjectURL(s)},1e3),s},async uploadFiles(){const e=this.files,s=new FormData;e.forEach(l=>{s.append("selectedFiles",l)});try{const l=await p.post("/api/uploadFiles",s,{headers:{"Content-Type":"multipart/form-data"}})}catch(l){console.log(l)}}}},g=e=>(_("data-v-e0f36e64"),e=e(),y(),e),x={for:"fileInput",class:"file-label"},b={key:0},F={key:1},C=g(()=>i("u",null,"click aquí",-1)),R={key:0,class:"preview-container mt-4"},w=["src"],L=["onClick"],I=g(()=>i("b",null,"×",-1)),S=[I];function U(e,s,l,d,a,r){return o(),n("div",null,[i("div",{class:"dropzone-container",onDragover:s[1]||(s[1]=(...t)=>r.dragover&&r.dragover(...t)),onDragleave:s[2]||(s[2]=(...t)=>r.dragleave&&r.dragleave(...t)),onDrop:s[3]||(s[3]=(...t)=>r.drop&&r.drop(...t)),style:v(a.isDragging&&"border-color: green;")},[i("input",{type:"file",multiple:"",name:"selectedFiles",id:"fileInput",class:"hidden-input",onChange:s[0]||(s[0]=(...t)=>r.onChange&&r.onChange(...t)),ref:"file",accept:".pdf,.jpg,.jpeg,.png"},null,544),i("label",x,[a.isDragging?(o(),n("div",b,"Release to drop files here.")):(o(),n("div",F,[c("Arrastra archivos acá o "),C,c(" para seleccionar.")]))]),a.files.length?(o(),n("div",R,[(o(!0),n(u,null,m(a.files,t=>(o(),n("div",{key:t.name,class:"preview-card"},[i("div",null,[i("img",{class:"preview-img",src:r.generateURL(t)},null,8,w),i("p",null,f(t.name)+" - "+f(Math.round(t.size/1e3)+"kb"),1)]),i("div",null,[i("button",{class:"ml-2",type:"button",onClick:j=>r.remove(a.files.indexOf(t)),title:"Remove file"},S,8,L)])]))),128))])):h("",!0)],36)])}const T=D(k,[["render",U],["__scopeId","data-v-e0f36e64"]]);export{T as default};
