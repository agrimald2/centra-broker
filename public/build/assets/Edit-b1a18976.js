import{r as b,o as c,c as d,a as o,u as x,w as v,F as m,Z as w,b as e,e as l,i as r,g as a,j as k,f as p,t as _,l as A}from"./app-b33c6b3b.js";import{A as C}from"./AdminLayout-68a646cb.js";import{B as V}from"./Breadcrumb-067f0bdc.js";import g from"./AddCustomer-b14ec544.js";import N from"./AddPeopleToInsurance-fa6d3cbe.js";import y from"./AddNewAsset-847c95a5.js";import f from"./AddFile-6572d486.js";import"./_plugin-vue_export-helper-c27b6911.js";const F={class:"space-y-12"},I={class:"border-b border-gray-900/10 pb-12"},B=e("h2",{class:"text-base font-semibold leading-7 text-gray-900"},"Crear una póliza nueva",-1),M=e("p",{class:"mt-1 text-sm leading-6 text-gray-600"}," Asegúrate de llenar todos los campos ",-1),P={class:"mt-10 grid grid-cols-1 gap-x-6 gap-y-8 sm:grid-cols-6"},U={class:"sm:col-span-3"},E=e("label",{for:"username",class:"block text-sm font-medium leading-6 text-gray-900"},[a(" Número de póliza "),e("button",{type:"button",class:"ml-2 text-white bg-gray-800 focus:ring-4 focus:outline-none focus:ring-[#050708]/50 font-medium rounded-lg text-sm px-2 py-2 text-center inline-flex items-center dark:focus:ring-gray-600 mr-2 mb-2"},[e("i",{class:"fa-solid fa-tag font-xl"})])],-1),H={class:"mt-2"},L={class:"bg-white flex rounded-md shadow-sm ring-1 ring-inset ring-gray-300 focus-within:ring-2 focus-within:ring-inset focus-within:ring-indigo-600 sm:max-w-md"},z=e("span",{class:"flex select-none items-center pl-3 text-gray-500 sm:text-sm"},"N° | ",-1),Z={class:"sm:col-span-3"},S={for:"first-name",class:"block text-sm font-medium leading-6 text-gray-900"},T=e("i",{class:"fa-solid fa-user-plus font-xl"},null,-1),$=[T],j={class:"mt-2"},D={class:"sm:col-span-2"},q=e("label",{for:"username",class:"block text-sm font-medium leading-6 text-gray-900"},[a(" Companía de Seguros "),e("button",{type:"button",class:"ml-2 text-white bg-gray-800 focus:ring-4 focus:outline-none focus:ring-[#050708]/50 font-medium rounded-lg text-sm px-2 py-2 text-center inline-flex items-center dark:focus:ring-gray-600 mr-2 mb-2"},[e("i",{class:"fa-solid fa-tag font-xl"})])],-1),O={class:"mt-2"},G={class:"sm:col-span-2"},J=e("label",{for:"first-name",class:"block text-sm font-medium leading-6 text-gray-900"}," Fecha de Inicio ",-1),K={class:"mt-4"},Q={class:"relative"},R=e("div",{class:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none"},[e("svg",{class:"w-4 h-4 text-gray-500","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{d:"M20 4a2 2 0 0 0-2-2h-2V1a1 1 0 0 0-2 0v1h-3V1a1 1 0 0 0-2 0v1H6V1a1 1 0 0 0-2 0v1H2a2 2 0 0 0-2 2v2h20V4ZM0 18a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V8H0v10Zm5-8h10a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Z"})])],-1),W={class:"sm:col-span-2"},X=e("label",{for:"first-name",class:"block text-sm font-medium leading-6 text-gray-900"}," Fecha de Vigencia ",-1),Y={class:"mt-4"},ee={class:"relative"},se=e("div",{class:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none"},[e("svg",{class:"w-4 h-4 text-gray-500","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{d:"M20 4a2 2 0 0 0-2-2h-2V1a1 1 0 0 0-2 0v1h-3V1a1 1 0 0 0-2 0v1H6V1a1 1 0 0 0-2 0v1H2a2 2 0 0 0-2 2v2h20V4ZM0 18a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V8H0v10Zm5-8h10a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Z"})])],-1),te={class:"sm:col-span-2"},ne=e("label",{for:"username",class:"block text-sm font-medium leading-6 text-gray-900"},[a(" Tipo de comisión "),e("button",{type:"button",class:"ml-2 text-white bg-gray-800 focus:ring-4 focus:outline-none focus:ring-[#050708]/50 font-medium rounded-lg text-sm px-2 py-2 text-center inline-flex items-center dark:focus:ring-gray-600 mr-2 mb-2"},[e("i",{class:"fa-solid fa-tag font-xl"})])],-1),ie={class:"mt-2"},oe={class:"sm:col-span-3"},ae={class:"mt-2"},le=e("option",{value:"1",selected:""},"% | PORCENTAJE",-1),re=e("option",{value:"2"},"N° | NUMÉRICA",-1),ce=[le,re],de={class:"sm:col-span-2"},ue=e("label",{for:"username",class:"block text-sm font-medium leading-6 text-gray-900"},[a(" Comisión "),e("button",{type:"button",class:"ml-2 text-white bg-gray-800 focus:ring-4 focus:outline-none focus:ring-[#050708]/50 font-medium rounded-lg text-sm px-2 py-2 text-center inline-flex items-center dark:focus:ring-gray-600 mr-2 mb-2"},[e("i",{class:"fa-solid fa-tag font-xl"})])],-1),me={class:"mt-2"},_e={class:"flex rounded-md shadow-sm ring-1 ring-inset ring-gray-300 focus-within:ring-2 focus-within:ring-inset focus-within:ring-indigo-600 sm:max-w-md"},pe=e("span",{class:"flex select-none items-center pl-3 text-gray-500 sm:text-sm"},"% |",-1),ge={class:"sm:col-span-1 col-span"},ye=e("label",{for:"username",class:"block text-sm font-medium leading-6 text-gray-900"}," N° Cuotas ",-1),fe={class:"mt-5"},he={class:"flex rounded-md shadow-sm ring-1 ring-inset ring-gray-300 focus-within:ring-2 focus-within:ring-inset focus-within:ring-indigo-600 sm:max-w-md"},be=e("span",{class:"flex select-none items-center pl-3 text-gray-700 sm:text-sm"},"N°",-1),xe={class:"sm:col-span-1"},ve=e("label",{for:"username",class:"block text-sm font-medium leading-6 text-gray-900"}," Tasa de riesgo ",-1),we={class:"mt-5"},ke={class:"flex rounded-md shadow-sm ring-1 ring-inset ring-gray-300 focus-within:ring-2 focus-within:ring-inset focus-within:ring-indigo-600 sm:max-w-md"},Ae=e("span",{class:"flex select-none items-center pl-3 text-gray-700 sm:text-sm"},"%",-1),Ce={class:"border-b border-gray-900/10 pb-12"},Ve=e("h2",{class:"text-base font-semibold leading-7 text-gray-900"},"Activos",-1),Ne=e("p",{class:"mt-1 text-sm leading-6 text-gray-600"}," Lista de activos Asegurados ",-1),Fe=e("i",{class:"ml-2 fa-solid fa-plus font-xl"},null,-1),Ie={class:"sm:col-span-3"},Be={class:"mt-10 grid grid-cols-8 gap-y-4"},Me={class:"sm:col-span-1 md:col-span-2 col-span-4"},Pe={class:"w-48 text-gray-900 bg-white border border-gray-200 rounded-lg"},Ue=["onClick"],Ee=e("i",{class:"fa-solid fa-kaaba mr-2"},null,-1),He=e("br",null,null,-1),Le={class:"border-b border-gray-900/10 pb-12"},ze=e("h2",{class:"text-base font-semibold leading-7 text-gray-900"},"Archivos de la póliza",-1),Ze=e("p",{class:"mt-1 text-sm leading-6 text-gray-600"}," Imágenes, PDF's, Excel y cualquier tipo de documento que esté relacionado a la poliza ",-1),Se=e("i",{class:"ml-2 fa-solid fa-plus font-xl"},null,-1),Te={class:"sm:col-span-3"},$e={class:"mt-10 grid grid-cols-8 gap-y-4"},je={class:"sm:col-span-4 md:col-span-2 col-span-4"},De={class:"w-48 text-gray-900 bg-white border border-gray-200 rounded-lg"},qe=["onClick"],Oe=e("i",{class:"fa-solid fa-file mr-2"},null,-1),Ge=e("br",null,null,-1),Je={class:"mt-6 flex items-center justify-end gap-x-6"},Ke=e("button",{type:"button",class:"text-sm font-semibold leading-6 text-gray-900"},"Cancelar",-1),Qe={components:{AddCustomer:g,AddPeopleToInsurance:N,AddNewAsset:y,AddFile:f},props:["breadcrumbs","general_settings","insurance_policies_data","insurancePolicy","insurance_billing_contact","insuranced_people","insurance_policies_data","assets"],data(){return{insurance_policy:{number:this.insurancePolicy.number,insurance_policy_data:{customer_id:this.insurance_policies_data[0].customer_id,insurance_policies_status_id:this.insurance_policies_data[0].status_id,insurance_company_id:this.insurance_policies_data[0].insurance_company_id,start_date:this.insurance_policies_data[0].start_date,end_date:this.insurance_policies_data[0].end_date,comission_type_id:this.insurance_policies_data[0].comission_type_id,comission:this.insurance_policies_data[0].comission,number_of_installments:this.insurance_policies_data[0].number_of_installments,risk_rate:this.insurance_policies_data[0].risk_rate,insurance_policy_insuranced_people:[],assets:this.insurance_policies_data[0].assets,files:[],insurance_policies_data_files:[]}},customers:[],insurance_companies:[]}},methods:{async submit(){try{const t=await axios.put(`/admin/insurance_policies/update/${this.insurancePolicy.id}`,this.insurance_policy)}catch(t){console.log(t)}},showModal(t){let s=document.getElementById(t);s.classList.remove("slide-out-bck-center"),s.classList.remove("no-display")},async getCustomers(){try{const t=await axios.get("/api/customer");this.customers=t.data}catch(t){console.log(t)}},async getInsuranceCompanies(){try{const t=await axios.get("/api/insurance_companies");this.insurance_companies=t.data}catch(t){console.log(t)}},handleNewFile(t){this.insurance_policy.insurance_policy_data.files.push(t)},removeFile(t){const s=this.insurance_policy.insurance_policy_data.files.findIndex(n=>n.name===t.name);s!==-1&&this.insurance_policy.insurance_policy_data.files.splice(s,1)},handleNewAsset(t){this.insurance_policy.insurance_policy_data.assets.push(t)},removeAsset(t){const s=this.insurance_policy.insurance_policy_data.assets.findIndex(n=>n.asset_type_id===t.asset_type_id&&n.insured_amount===t.insured_amount&&n.vigency_date===t.vigency_date);s!==-1&&this.insurance_policy.insurance_policy_data.assets.splice(s,1)},handleNewCustomer(t){this.customers.push(t),this.insurance_policy.insurance_policy_data.customer_id=t.id},handleNewPeople(t){console.table(t),t.type_id===1?(this.removePeopleByType(1),this.insurance_policy.insurance_policy_data.insurance_policy_people.push(t),this.setBillingContact(t)):t.type_id===2&&(this.insurance_policy.insurance_policy_data.insurance_policy_people.push(t),this.addInsurancedPeople(t))},removePeopleByType(t){const s=this.insurance_policy.insurance_policy_data.insurance_policy_people.findIndex(n=>n.type_id===t);s!==-1&&this.insurance_policy.insurance_policy_data.insurance_policy_people.splice(s,1)},setBillingContact(t){this.insurance_policy.insurance_policy_data.insurance_policy_billing_contact=t},addInsurancedPeople(t){this.insurance_policy.insurance_policy_data.insurance_policy_insuranced_people.push(t)},removeInsurancedPeople(t){this.removePeopleFromList(t,this.insurance_policy.insurance_policy_data.insurance_policy_insuranced_people),this.removePeopleFromList(t,this.insurance_policy.insurance_policy_data.insurance_policy_people)},removePeopleFromList(t,s){const n=s.findIndex(u=>u.document_number===t.document_number);n!==-1&&s.splice(n,1)}},mounted(){this.getCustomers(),this.getInsuranceCompanies()}},is=Object.assign(Qe,{__name:"Edit",setup(t){return(s,n)=>{const u=b("v-select");return c(),d(m,null,[o(x(w),{title:"Editar Póliza"}),o(C,null,{default:v(()=>[o(V,{breadcrumbs:t.breadcrumbs},null,8,["breadcrumbs"]),e("form",{class:"px-2",onSubmit:n[13]||(n[13]=A((...i)=>s.submit&&s.submit(...i),["prevent"]))},[e("div",F,[e("div",I,[B,M,e("div",P,[e("div",U,[E,e("div",H,[e("div",L,[z,l(e("input",{type:"text",name:"number",id:"number",autocomplete:"number","onUpdate:modelValue":n[0]||(n[0]=i=>s.insurance_policy.number=i),class:"block flex-1 border-0 bg-transparent py-1.5 pl-1 text-gray-900 placeholder:text-gray-400 focus:ring-0 sm:text-sm sm:leading-6",placeholder:"000001"},null,512),[[r,s.insurance_policy.number]])])])]),e("div",Z,[e("label",S,[a(" Contratante "),e("button",{type:"button",onClick:n[1]||(n[1]=i=>s.showModal("AddCustomer")),class:"ml-2 text-white bg-green-800 hover:bg-[#050708]/80 focus:ring-4 focus:outline-none focus:ring-[#050708]/50 font-medium rounded-lg text-sm px-2 py-2 text-center inline-flex items-center dark:focus:ring-gray-600 mr-2 mb-2"},$),o(g,{id:"AddCustomer",onCustomerAdded:s.handleNewCustomer},null,8,["onCustomerAdded"])]),e("div",j,[o(u,{modelValue:s.insurance_policy.insurance_policy_data.customer_id,"onUpdate:modelValue":n[2]||(n[2]=i=>s.insurance_policy.insurance_policy_data.customer_id=i),options:s.customers,reduce:i=>i.id,label:"name"},null,8,["modelValue","options","reduce"])])]),e("div",D,[q,e("div",O,[o(u,{modelValue:s.insurance_policy.insurance_policy_data.insurance_company_id,"onUpdate:modelValue":n[3]||(n[3]=i=>s.insurance_policy.insurance_policy_data.insurance_company_id=i),options:s.insurance_companies,reduce:i=>i.id,label:"name"},null,8,["modelValue","options","reduce"])])]),e("div",G,[J,e("div",K,[e("div",Q,[R,l(e("input",{type:"date","onUpdate:modelValue":n[4]||(n[4]=i=>s.insurance_policy.insurance_policy_data.start_date=i),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full pl-10 p-2.5 dark:placeholder-gray-400 dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"Select date"},null,512),[[r,s.insurance_policy.insurance_policy_data.start_date]])])])]),e("div",W,[X,e("div",Y,[e("div",ee,[se,l(e("input",{type:"date","onUpdate:modelValue":n[5]||(n[5]=i=>s.insurance_policy.insurance_policy_data.end_date=i),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full pl-10 p-2.5 dark:placeholder-gray-400 dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"Select date"},null,512),[[r,s.insurance_policy.insurance_policy_data.end_date]])])])]),e("div",te,[ne,e("div",ie,[e("div",oe,[e("div",ae,[l(e("select",{id:"country",name:"country",autocomplete:"country-name","onUpdate:modelValue":n[6]||(n[6]=i=>s.insurance_policy.insurance_policy_data.comission_type_id=i),class:"bg-transparent block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:max-w-xs sm:text-sm sm:leading-6"},ce,512),[[k,s.insurance_policy.insurance_policy_data.comission_type_id]])])])])]),e("div",de,[ue,e("div",me,[e("div",_e,[pe,l(e("input",{type:"number",name:"number",id:"number",autocomplete:"number","onUpdate:modelValue":n[7]||(n[7]=i=>s.insurance_policy.insurance_policy_data.comission=i),class:"block flex-1 border-0 bg-transparent py-1.5 pl-1 text-gray-900 placeholder:text-gray-400 focus:ring-0 sm:text-sm sm:leading-6",placeholder:"12.0"},null,512),[[r,s.insurance_policy.insurance_policy_data.comission]])])])]),e("div",ge,[ye,e("div",fe,[e("div",he,[be,l(e("input",{type:"number","onUpdate:modelValue":n[8]||(n[8]=i=>s.insurance_policy.insurance_policy_data.number_of_installments=i),class:"block flex-1 border-0 bg-transparent py-1.5 pl-1 text-gray-900 placeholder:text-gray-400 focus:ring-0 sm:text-sm sm:leading-6",placeholder:"5"},null,512),[[r,s.insurance_policy.insurance_policy_data.number_of_installments]])])])]),e("div",xe,[ve,e("div",we,[e("div",ke,[Ae,l(e("input",{type:"text","onUpdate:modelValue":n[9]||(n[9]=i=>s.insurance_policy.insurance_policy_data.risk_rate=i),class:"block flex-1 border-0 bg-transparent py-1.5 pl-1 text-gray-900 placeholder:text-gray-400 focus:ring-0 sm:text-sm sm:leading-6",placeholder:"2.8"},null,512),[[r,s.insurance_policy.insurance_policy_data.risk_rate]])])])])])]),e("div",Ce,[Ve,Ne,e("button",{type:"button",onClick:n[10]||(n[10]=i=>s.showModal("NewAsset")),class:"mt-1 text-white bg-indigo-800 hover:bg-[#050708]/80 focus:ring-4 focus:outline-none focus:ring-[#050708]/50 font-medium rounded-lg text-sm px-5 py-2.5 text-center inline-flex items-center dark:focus:ring-gray-600 mr-2 mb-2"},[a(" Añadir Activo "),Fe]),o(y,{id:"NewAsset",onAssetAdded:s.handleNewAsset},null,8,["onAssetAdded"]),e("div",Ie,[e("div",Be,[(c(!0),d(m,null,p(s.insurance_policy.insurance_policy_data.assets,i=>(c(),d("div",Me,[e("div",Pe,[e("button",{type:"button",onClick:h=>s.removeAsset(i),class:"relative inline-flex items-center w-full px-4 py-2 text-sm font-medium border-b border-gray-200 rounded-t-lg hover:bg-gray-100 hover:text-blue-700 focus:z-10 focus:ring-2 focus:ring-blue-700 focus:text-blue-700 dark:focus:ring-gray-500 dark:focus:text-white"},[Ee,a(" "+_(i.asset_type_name)+" | "+_(i.insured_amount)+" ",1),He],8,Ue)])]))),256))])])]),e("div",Le,[ze,Ze,e("button",{type:"button",onClick:n[11]||(n[11]=i=>s.showModal("AddFile")),class:"mt-1 text-white bg-indigo-800 hover:bg-[#050708]/80 focus:ring-4 focus:outline-none focus:ring-[#050708]/50 font-medium rounded-lg text-sm px-5 py-2.5 text-center inline-flex items-center dark:focus:ring-gray-600 mr-2 mb-2"},[a(" Añadir Archivo "),Se]),o(f,{id:"AddFile",onFileAdded:s.handleNewFile},null,8,["onFileAdded"]),e("div",Te,[e("div",$e,[(c(!0),d(m,null,p(s.insurance_policy.insurance_policy_data.files,i=>(c(),d("div",je,[e("div",De,[e("button",{type:"button",onClick:h=>s.removeFile(i),class:"relative inline-flex items-center w-full px-4 py-2 text-sm font-medium border-b border-gray-200 rounded-t-lg hover:bg-gray-100 hover:text-blue-700 focus:z-10 focus:ring-2 focus:ring-blue-700 focus:text-blue-700 dark:focus:ring-gray-500 dark:focus:text-white"},[Oe,e("span",null,_(i.name.length>10?i.name.slice(0,10)+"...":i.name),1),Ge],8,qe)])]))),256))])])])]),e("div",Je,[Ke,e("button",{type:"submit",onClick:n[12]||(n[12]=(...i)=>s.submit&&s.submit(...i)),class:"rounded-md bg-indigo-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600"}," Guardar ")])],32)]),_:1})],64)}}});export{is as default};
