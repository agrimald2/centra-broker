import{r as x,o as a,c as i,a as r,u as v,w,F as d,Z as k,b as e,t as l,d as u,f as _,v as V,e as m,g as c,h}from"./app-9fa038e8.js";import{A}from"./AdminLayout-f19afe37.js";import{B as P}from"./Breadcrumb-3fdb3171.js";import b from"./AddEndorse-0d8e4d52.js";import f from"./ShowAsset-fcce4b9e.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./AddCustomer-911e96eb.js";import"./AddPeopleToInsurance-7107aa1d.js";import"./AddNewAsset-1c4ee79e.js";import"./AddFile-b005d170.js";const C={class:"px-2"},N={class:"space-y-12"},E={class:"border-b border-gray-900/10 pb-12"},F={class:"text-base font-semibold leading-7 text-gray-900"},M={class:"mt-2 grid grid-cols-1 gap-x-2 gap-y-4 sm:grid-cols-6"},U={class:"sm:col-span-2"},S=e("label",{for:"username",class:"block text-sm font-medium leading-6 text-gray-900"},[c(" Número de póliza "),e("button",{type:"button",disabled:"",class:"ml-2 text-white bg-gray-800 focus:ring-4 focus:outline-none focus:ring-[#050708]/50 font-medium rounded-lg text-sm px-2 py-2 text-center inline-flex items-center dark:focus:ring-gray-600 mr-2 mb-2"},[e("i",{class:"fa-solid fa-tag font-xl"})])],-1),B={class:"mt-2"},H={class:"bg-white flex rounded-md shadow-sm ring-1 ring-inset ring-gray-300 focus-within:ring-2 focus-within:ring-inset focus-within:ring-indigo-600 sm:max-w-md"},z=e("span",{class:"flex select-none items-center pl-3 text-gray-500 sm:text-sm"},"N° | ",-1),T={class:"sm:col-span-2"},Z=e("label",{for:"first-name",class:"block text-sm font-medium leading-6 text-gray-900"},[c(" Contratante "),e("button",{type:"button",class:"ml-2 text-white bg-gray-800 hover:bg-[#050708]/80 focus:ring-4 focus:outline-none focus:ring-[#050708]/50 font-medium rounded-lg text-sm px-2 py-2 text-center inline-flex items-center dark:focus:ring-gray-600 mr-2 mb-2"},[e("i",{class:"fa-solid fa-user-plus font-xl"})])],-1),L={class:"mt-2"},$={class:"sm:col-span-2"},D=e("label",{for:"username",class:"block text-sm font-medium leading-6 text-gray-900"},[c(" Companía de Seguros "),e("button",{type:"button",disabled:"",class:"ml-2 text-white bg-gray-800 focus:ring-4 focus:outline-none focus:ring-[#050708]/50 font-medium rounded-lg text-sm px-2 py-2 text-center inline-flex items-center dark:focus:ring-gray-600 mr-2 mb-2"},[e("i",{class:"fa-solid fa-tag font-xl"})])],-1),I={class:"mt-2"},q={class:"sm:col-span-1"},O=e("label",{for:"first-name",class:"block text-sm font-medium leading-6 text-gray-900"}," Inicio de Vigencia ",-1),R={class:"mt-4"},j={class:"relative"},J=e("div",{class:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none"},[e("svg",{class:"w-4 h-4 text-gray-500","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{d:"M20 4a2 2 0 0 0-2-2h-2V1a1 1 0 0 0-2 0v1h-3V1a1 1 0 0 0-2 0v1H6V1a1 1 0 0 0-2 0v1H2a2 2 0 0 0-2 2v2h20V4ZM0 18a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V8H0v10Zm5-8h10a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Z"})])],-1),G={class:"sm:col-span-1"},K=e("label",{for:"first-name",class:"block text-sm font-medium leading-6 text-gray-900"}," Fin de Vigencia ",-1),Q={class:"mt-4"},W={class:"relative"},X=e("div",{class:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none"},[e("svg",{class:"w-4 h-4 text-gray-500","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{d:"M20 4a2 2 0 0 0-2-2h-2V1a1 1 0 0 0-2 0v1h-3V1a1 1 0 0 0-2 0v1H6V1a1 1 0 0 0-2 0v1H2a2 2 0 0 0-2 2v2h20V4ZM0 18a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V8H0v10Zm5-8h10a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Z"})])],-1),Y={class:"sm:col-span-1"},ee=e("label",{for:"username",class:"block text-sm font-medium leading-6 text-gray-900"},[c(" T. comisión "),e("button",{type:"button",disabled:"",class:"ml-2 text-white bg-gray-800 focus:ring-4 focus:outline-none focus:ring-[#050708]/50 font-medium rounded-lg text-sm px-2 py-2 text-center inline-flex items-center dark:focus:ring-gray-600 mr-2 mb-2"},[e("i",{class:"fa-solid fa-tag font-xl"})])],-1),se={class:"mt-2"},te={class:"sm:col-span-3"},ne={class:"mt-2"},oe=e("option",{value:"1",selected:""},"% | PORCENTAJE",-1),ae=e("option",{value:"2"},"N° | NUMÉRICA",-1),ie=[oe,ae],le={class:"sm:col-span-1"},ce=e("label",{for:"username",class:"block text-sm font-medium leading-6 text-gray-900"},[c(" Comisión "),e("button",{type:"button",disabled:"",class:"ml-2 text-white bg-gray-800 focus:ring-4 focus:outline-none focus:ring-[#050708]/50 font-medium rounded-lg text-sm px-2 py-2 text-center inline-flex items-center dark:focus:ring-gray-600 mr-2 mb-2"},[e("i",{class:"fa-solid fa-tag font-xl"})])],-1),re={class:"mt-2"},de={class:"flex rounded-md shadow-sm ring-1 ring-inset ring-gray-300 focus-within:ring-2 focus-within:ring-inset focus-within:ring-indigo-600 sm:max-w-md"},ue=e("span",{class:"flex select-none items-center pl-3 text-gray-500 sm:text-sm"},"% |",-1),_e={class:"sm:col-span-1 col-span"},me=e("label",{for:"username",class:"block text-sm font-medium leading-6 text-gray-900"}," N° Cuotas ",-1),pe={class:"mt-5"},ge={class:"flex rounded-md shadow-sm ring-1 ring-inset ring-gray-300 focus-within:ring-2 focus-within:ring-inset focus-within:ring-indigo-600 sm:max-w-md"},ye=e("span",{class:"flex select-none items-center pl-3 text-gray-700 sm:text-sm"},"N°",-1),he={class:"sm:col-span-1"},be=e("label",{for:"username",class:"block text-sm font-medium leading-6 text-gray-900"}," Tasa de riesgo ",-1),fe={class:"mt-5"},xe={class:"flex rounded-md shadow-sm ring-1 ring-inset ring-gray-300 focus-within:ring-2 focus-within:ring-inset focus-within:ring-indigo-600 sm:max-w-md"},ve=e("span",{class:"flex select-none items-center pl-3 text-gray-700 sm:text-sm"},"%",-1),we={class:"border-b border-gray-900/10 pb-12"},ke=e("h2",{class:"text-base font-semibold leading-7 text-gray-900"},"Activos",-1),Ve=e("p",{class:"mt-1 text-sm leading-6 text-gray-600"}," Lista de activos Asegurados ",-1),Ae={class:"sm:col-span-3"},Pe={class:"w-full text-sm text-left text-gray-500 table"},Ce=e("thead",{class:"text-xs text-gray-700 uppercase bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3"}," Tipo "),e("th",{scope:"col",class:"px-6 py-3"}," Valor Asegurado "),e("th",{scope:"col",class:"px-6 py-3"}," Fecha de Vigencia "),e("th",{scope:"col",class:"px-6 py-3"}," Atributos "),e("th",{scope:"col",class:"px-6 py-3"}," Acciones ")])],-1),Ne={class:"bg-white border-b hover:bg-gray-50"},Ee={scope:"row",class:"px-6 py-4"},Fe=e("br",null,null,-1),Me={key:0},Ue=e("div",{class:"ml-1 h-2.5 w-2.5 rounded-full bg-red-500"},null,-1),Se=[Ue],Be={class:"px-6 py-4"},He={class:"px-6 py-4"},ze={class:"px-6 py-4"},Te={class:"w-full text-sm text-left text-gray-500 table"},Ze={class:"text-xs text-gray-700 uppercase bg-gray-100"},Le={scope:"col",class:"px-6 py-3 text-center"},$e={class:"bg-white border-b hover:bg-white"},De={class:"px-6 py-4"},Ie={class:"px-6 py-4"},qe=["onClick"],Oe={class:"border-b border-gray-900/10 pb-12"},Re=e("h2",{class:"text-base font-semibold leading-7 text-gray-900"},"Archivos de la póliza",-1),je=e("p",{class:"mt-1 text-sm leading-6 text-gray-600"}," Imágenes, PDF's, Excel y cualquier tipo de documento que esté relacionado a la poliza ",-1),Je={key:0,class:"overflow-x-auto"},Ge={class:"w-full text-sm text-left text-gray-500 table"},Ke=e("thead",{class:"text-xs text-gray-700 uppercase bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3"}," Nombre del archivo "),e("th",{scope:"col",class:"px-6 py-3"}," Acciones ")])],-1),Qe={class:"bg-white border-b hover:bg-gray-50"},We={class:"px-6 py-4"},Xe={class:"px-6 py-4"},Ye=["onClick"],es=e("i",{class:"fa-solid fa-eye text-xl"},null,-1),ss=[es],ts={class:"border-b border-gray-900/10 pb-2"},ns={class:"flex"},os=e("h2",{class:"text-base font-semibold leading-7 text-gray-900"},"Endosos",-1),as=e("i",{class:"fa-solid fa-add text-md"},null,-1),is=[as],ls=e("p",{class:"mt-1 text-sm leading-6 text-gray-600"}," Endosos pertenecientes a esta póliza ",-1),cs={class:"overflow-x-auto"},rs={class:"w-full text-sm text-left text-gray-500 table"},ds=e("thead",{class:"text-xs text-gray-700 uppercase bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3"}," Fecha "),e("th",{scope:"col",class:"px-6 py-3"}," Cliente "),e("th",{scope:"col",class:"px-6 py-3"}," N° Activos "),e("th",{scope:"col",class:"px-6 py-3"}," Comisión Total "),e("th",{scope:"col",class:"px-6 py-3"}," Vigencia "),e("th",{scope:"col",class:"px-6 py-3"}," Acciones ")])],-1),us={class:"bg-white border-b hover:bg-gray-50"},_s={scope:"row",class:"flex items-center px-6 py-4 text-gray-900 whitespace-nowrap"},ms={class:""},ps={class:"text-base font-semibold"},gs={class:"px-6 py-4"},ys={key:0},hs=e("br",null,null,-1),bs={class:"px-6 py-4"},fs={class:"flex items-center"},xs=e("div",{class:"h-2.5 w-2.5 rounded-full bg-green-500 mr-2"},null,-1),vs={class:"px-6 py-4"},ws={class:"px-6 py-4"},ks={class:"px-6 py-4"},Vs=["href"],As=e("i",{class:"fa-solid fa-eye text-3xl text-indigo-600 cursor-pointer ml-2"},null,-1),Ps=[As],Cs={class:"sm:col-span-3"},Ns={class:"mt-2 grid grid-cols-8 gap-y-4"},Es={class:"sm:col-span-4 md:col-span-2 col-span-4"},Fs={class:"w-48 text-gray-900 bg-white border border-gray-200 rounded-lg"},Ms=["onClick"],Us=e("i",{class:"fa-solid fa-file mr-2"},null,-1),Ss=e("br",null,null,-1),Bs={components:{ShowAsset:f,AddEndorse:b},props:["breadcrumbs","insurancePolicy","insurance_billing_contact","insuranced_people","insurance_policies_data","assets","files"],data(){return{insurance_policy:{number:this.insurancePolicy.number,insurance_policy_data:{customer_id:this.insurancePolicy.latest_insurance_policy_data.customer,insurance_policies_status_id:1,insurance_company_id:this.insurancePolicy.latest_insurance_policy_data.insurance_company,start_date:this.insurancePolicy.latest_insurance_policy_data.start_date,end_date:this.insurancePolicy.latest_insurance_policy_data.start_date,comission_type_id:this.insurancePolicy.latest_insurance_policy_data.comission_type_id,comission:this.insurancePolicy.latest_insurance_policy_data.comission,number_of_installments:this.insurancePolicy.latest_insurance_policy_data.number_of_installments,risk_rate:this.insurancePolicy.latest_insurance_policy_data.risk_rate,insurance_policy_people:this.insurancePolicy.latest_insurance_policy_data.people,insurance_policy_billing_contact:this.insurance_billing_contact,insurance_policy_insuranced_people:this.insuranced_people,assets:this.insurancePolicy.latest_insurance_policy_data.assets,files:[],insurance_policies_data_files:[]}}}},methods:{openFile(o){console.dir(o),o="/storage/"+o,window.open(o,"_blank")},showModal(o){let t=document.getElementById(o);t.classList.remove("slide-out-bck-center"),t.classList.remove("no-display")},formatActualAssets(){const o=this.insurance_policy.insurance_policy_data.assets.map(t=>{let n={asset_type_id:t.asset_type_id,asset_type_name:t.asset_type.name,insured_amount:parseFloat(t.insured_amount),vigency_date:t.vigency_date,assets_attributes_data:{}};return t.assets_attributes_data.forEach(p=>{n.assets_attributes_data[p.id]=p.value}),n});this.insurance_policy.insurance_policy_data.assets=o}},mounted(){this.formatActualAssets()}},Rs=Object.assign(Bs,{__name:"Show",setup(o){return(t,n)=>{const p=x("v-select");return a(),i(d,null,[r(v(k),{title:o.insurancePolicy.number+"- Póliza"},null,8,["title"]),r(A,null,{default:w(()=>[r(P,{breadcrumbs:o.breadcrumbs},null,8,["breadcrumbs"]),e("form",C,[e("div",N,[e("div",E,[e("h2",F,l("Póliza N°"+o.insurancePolicy.number),1),e("div",M,[e("div",U,[S,e("div",B,[e("div",H,[z,u(e("input",{type:"text",name:"number",id:"number",autocomplete:"number",class:"block flex-1 border-0 bg-transparent py-1.5 pl-1 text-gray-900 placeholder:text-gray-400 focus:ring-0 sm:text-sm sm:leading-6",placeholder:"000001",disabled:"","onUpdate:modelValue":n[0]||(n[0]=s=>o.insurancePolicy.number=s)},null,512),[[_,o.insurancePolicy.number]])])])]),e("div",T,[Z,e("div",L,[r(p,{modelValue:t.insurance_policy.insurance_policy_data.customer_id,"onUpdate:modelValue":n[1]||(n[1]=s=>t.insurance_policy.insurance_policy_data.customer_id=s),options:t.customers,disabled:"",reduce:s=>s.id,label:"name"},null,8,["modelValue","options","reduce"])])]),e("div",$,[D,e("div",I,[r(p,{modelValue:t.insurance_policy.insurance_policy_data.insurance_company_id,"onUpdate:modelValue":n[2]||(n[2]=s=>t.insurance_policy.insurance_policy_data.insurance_company_id=s),disabled:"",options:t.insurance_companies,reduce:s=>s.id,label:"name"},null,8,["modelValue","options","reduce"])])]),e("div",q,[O,e("div",R,[e("div",j,[J,u(e("input",{type:"date","onUpdate:modelValue":n[3]||(n[3]=s=>t.insurance_policy.insurance_policy_data.start_date=s),disabled:"",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full pl-10 p-2.5 dark:placeholder-gray-400 dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"Select date"},null,512),[[_,t.insurance_policy.insurance_policy_data.start_date]])])])]),e("div",G,[K,e("div",Q,[e("div",W,[X,u(e("input",{type:"date","onUpdate:modelValue":n[4]||(n[4]=s=>t.insurance_policy.insurance_policy_data.end_date=s),disabled:"",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full pl-10 p-2.5 dark:placeholder-gray-400 dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"Select date"},null,512),[[_,t.insurance_policy.insurance_policy_data.end_date]])])])]),e("div",Y,[ee,e("div",se,[e("div",te,[e("div",ne,[u(e("select",{id:"country",name:"country",autocomplete:"country-name",disabled:"","onUpdate:modelValue":n[5]||(n[5]=s=>t.insurance_policy.insurance_policy_data.comission_type_id=s),class:"bg-transparent block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:max-w-xs sm:text-sm sm:leading-6"},ie,512),[[V,t.insurance_policy.insurance_policy_data.comission_type_id]])])])])]),e("div",le,[ce,e("div",re,[e("div",de,[ue,u(e("input",{type:"number",name:"number",id:"number",autocomplete:"number",disabled:"","onUpdate:modelValue":n[6]||(n[6]=s=>t.insurance_policy.insurance_policy_data.comission=s),class:"block flex-1 border-0 bg-transparent py-1.5 pl-1 text-gray-900 placeholder:text-gray-400 focus:ring-0 sm:text-sm sm:leading-6",placeholder:"12.0"},null,512),[[_,t.insurance_policy.insurance_policy_data.comission]])])])]),e("div",_e,[me,e("div",pe,[e("div",ge,[ye,u(e("input",{type:"number",disabled:"","onUpdate:modelValue":n[7]||(n[7]=s=>t.insurance_policy.insurance_policy_data.number_of_installments=s),class:"block flex-1 border-0 bg-transparent py-1.5 pl-1 text-gray-900 placeholder:text-gray-400 focus:ring-0 sm:text-sm sm:leading-6",placeholder:"5"},null,512),[[_,t.insurance_policy.insurance_policy_data.number_of_installments]])])])]),e("div",he,[be,e("div",fe,[e("div",xe,[ve,u(e("input",{type:"number","onUpdate:modelValue":n[8]||(n[8]=s=>t.insurance_policy.insurance_policy_data.risk_rate=s),disabled:"",class:"block flex-1 border-0 bg-transparent py-1.5 pl-1 text-gray-900 placeholder:text-gray-400 focus:ring-0 sm:text-sm sm:leading-6",placeholder:"2.8"},null,512),[[_,t.insurance_policy.insurance_policy_data.risk_rate]])])])])])]),e("div",we,[ke,Ve,e("div",Ae,[e("table",Pe,[Ce,e("tbody",null,[(a(!0),i(d,null,m(o.assets,(s,g)=>(a(),i("tr",Ne,[e("td",Ee,[c(l(s.asset_type.name)+" ",1),Fe,s.incidents.length>0?(a(),i("span",Me,Se)):h("",!0)]),e("td",Be,l(s.insured_amount),1),e("td",He,l(s.vigency_date),1),e("td",ze,[e("table",Te,[e("thead",Ze,[e("tr",null,[(a(!0),i(d,null,m(s.asset_type.attributes,y=>(a(),i("th",Le,l(y.name),1))),256))])]),e("tbody",null,[e("tr",$e,[(a(!0),i(d,null,m(s.assets_attributes_data,y=>(a(),i("td",De,l(y.value),1))),256))])])])]),e("td",Ie,[e("i",{onClick:y=>t.showModal("Asset-"+g),class:"fa-solid fa-eye text-3xl text-blue-500 cursor-pointer ml-2"},null,8,qe)]),r(f,{id:"Asset-"+g,asset_id:s.id,asset:s,assets_attributes_data:s.assets_attributes_data},null,8,["id","asset_id","asset","assets_attributes_data"])]))),256))])])])]),e("div",Oe,[Re,je,o.files.length>0?(a(),i("div",Je,[e("table",Ge,[Ke,e("tbody",null,[(a(!0),i(d,null,m(o.files,s=>(a(),i("tr",Qe,[e("td",We,l(s.name),1),e("td",Xe,[e("button",{type:"button",class:"text-blue-500 hover:text-blue-700",onClick:g=>t.openFile(s.path)},ss,8,Ye)])]))),256))])])])):h("",!0)]),e("div",ts,[e("div",ns,[os,e("a",{onClick:n[9]||(n[9]=s=>t.showModal("AddEndorse"+t.insurance_policy.number)),class:"ml-2 text-white bg-indigo-800 hover:bg-[#050708]/80 focus:ring-4 focus:outline-none focus:ring-[#050708]/50 font-medium rounded-lg text-sm p-1 text-center inline-flex items-center dark:focus:ring-gray-600 mr-2 mb-2"},is),r(b,{id:"AddEndorse"+t.insurance_policy.number,insurancePolicy:o.insurancePolicy.latest_insurance_policy_data,insurance_billing_contact:o.insurance_billing_contact,insuranced_people:o.insuranced_people},null,8,["id","insurancePolicy","insurance_billing_contact","insuranced_people"])]),ls,e("div",cs,[e("table",rs,[ds,e("tbody",null,[(a(!0),i(d,null,m(o.insurance_policies_data,s=>(a(),i("tr",us,[e("th",_s,[e("div",ms,[e("div",ps,l(new Date(s.created_at).toLocaleDateString()),1)])]),e("td",gs,[s.customer?(a(),i("span",ys,[c(l(s.customer.name)+" ",1),hs,c(" "+l(s.customer.document_type.name)+" | "+l(s.customer.document_number),1)])):h("",!0)]),e("td",bs,[e("div",fs,[xs,c(" "+l(s.assets.length),1)])]),e("td",vs," $ "+l(s.totalComission.toFixed(2)),1),e("td",ws,l(s.end_date),1),e("td",ks,[e("a",{href:"/admin/insurance_policies/show/"+o.insurancePolicy.id},Ps,8,Vs)])]))),256))])])]),e("div",Cs,[e("div",Ns,[(a(!0),i(d,null,m(t.insurance_policy.insurance_policy_data.files,s=>(a(),i("div",Es,[e("div",Fs,[e("button",{type:"button",onClick:g=>t.removeFile(s),class:"relative inline-flex items-center w-full px-4 py-2 text-sm font-medium border-b border-gray-200 rounded-t-lg hover:bg-gray-100 hover:text-blue-700 focus:z-10 focus:ring-2 focus:ring-blue-700 focus:text-blue-700 dark:focus:ring-gray-500 dark:focus:text-white"},[Us,e("span",null,l(s.name.length>10?s.name.slice(0,10)+"...":s.name),1),Ss],8,Ms)])]))),256))])])])])])]),_:1})],64)}}});export{Rs as default};
